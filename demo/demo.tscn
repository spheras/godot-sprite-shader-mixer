[gd_scene load_steps=5 format=3 uid="uid://btvorthsuc7d1"]

[ext_resource type="Texture2D" uid="uid://d4mof1la3dat3" path="res://addons/sprite-shader-mixer/assets/shaders/noise/noise2.png" id="1_63pgk"]
[ext_resource type="Texture2D" uid="uid://iwe61yidmofj" path="res://demo/assets/supergodot/supergodot-0000.png" id="3_t3lb8"]

[sub_resource type="Shader" id="Shader_snh6e"]
code = "//ATTENTION:
//  THIS IS SHADE AUTOGENERATED BY
//  THE ADDON SPRITE-SHADER-MIXER
//  ANY MANUAL CHANGES WILL BE REMOVED WHEN THE ADDON
//  UPDATES THIS SHADER.
//  ANYWAY, YOU CAN SAVE THE CURRENT VERSION AS A RESOURCE FILE.
//SHADERS:Disolve Burn,
shader_type canvas_item;

	
//DISOLVE BURN
uniform bool      DISOLVEBURN_active  = true;
uniform sampler2D DISOLVEBURN_noise_tex;
uniform vec4      DISOLVEBURN_burn_color : source_color = vec4(1.0, 0.3, 0.05, 1.0);
uniform float     DISOLVEBURN_process_value : hint_range(0, 1) = 0;
void disolveBurn(in vec2 uv, in sampler2D tex, in vec2 spriteSize, in vec2 pixelSize, inout vec4 finalColor)
{
	float noise = texture(DISOLVEBURN_noise_tex, uv).r;
	vec4 color = vec4(smoothstep(DISOLVEBURN_process_value * 0.8, DISOLVEBURN_process_value + 0.15, noise));
	color = finalColor * color;
	color.r = mix(color.r, color.r * (1. - color.a) * DISOLVEBURN_burn_color.r * 150.0, DISOLVEBURN_process_value);
	color.g = mix(color.g, color.g * (1. - color.a) * DISOLVEBURN_burn_color.g * 150.0, DISOLVEBURN_process_value);
	color.b = mix(color.b, color.b * (1. - color.a) * DISOLVEBURN_burn_color.b * 150.0 , DISOLVEBURN_process_value);
	color.rgb = mix(clamp(color.rbg, 0.0, 1.0), color.rgb, 1.0);
	finalColor=color;
}


void fragment() {
	vec4 color = texture(TEXTURE, UV);
	vec2 size = vec2(textureSize(TEXTURE, 0));

	if(DISOLVEBURN_active) disolveBurn(UV, TEXTURE, size, TEXTURE_PIXEL_SIZE, color);


	COLOR=color;
}	
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_vdn7o"]
shader = SubResource("Shader_snh6e")
shader_parameter/DISOLVEBURN_active = true
shader_parameter/DISOLVEBURN_burn_color = Color(1, 0.3, 0.05, 1)
shader_parameter/DISOLVEBURN_process_value = 0.0
shader_parameter/DISOLVEBURN_noise_tex = ExtResource("1_63pgk")

[node name="Demo" type="Node2D"]

[node name="Sprite2D" type="Sprite2D" parent="."]
material = SubResource("ShaderMaterial_vdn7o")
texture = ExtResource("3_t3lb8")
