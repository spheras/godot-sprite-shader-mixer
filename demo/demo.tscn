[gd_scene load_steps=4 format=3 uid="uid://btvorthsuc7d1"]

[ext_resource type="Texture2D" uid="uid://iwe61yidmofj" path="res://demo/assets/supergodot/supergodot-0000.png" id="3_t3lb8"]

[sub_resource type="Shader" id="Shader_gx78k"]
code = "//ATTENTION:
//  THIS IS SHADE AUTOGENERATED BY
//  THE ADDON SPRITE-SHADER-MIXER
//  ANY MANUAL CHANGES WILL BE REMOVED WHEN THE ADDON
//  UPDATES THIS SHADER.
//  ANYWAY, YOU CAN SAVE THE CURRENT VERSION AS A RESOURCE FILE.
//SHADERS:Blur,
shader_type canvas_item;


//BLUR
uniform bool  BLUR_active  = true;
uniform float BLUR_radius : hint_range(1, 10.0) = 2.0;
void blur(in vec2 uv, in sampler2D tex, in vec2 size, in vec2 pixelSize, inout vec4 color) {
	vec4 final_color = vec4(0.0);
    float total_weight = 0.0;

    for (float x = -BLUR_radius; x <= BLUR_radius; x += 1.0) {
        for (float y = -BLUR_radius; y <= BLUR_radius; y += 1.0) {
            vec2 offset = vec2(x, y);
            vec4 sample = texture(tex, uv + offset / size);

            float distance = length(offset);
            float weight = smoothstep(BLUR_radius, BLUR_radius - 1.0, distance);

            final_color += sample * weight;
            total_weight += weight;
        }
    }
    color= final_color / total_weight;
}

void fragment() {
	vec4 color = texture(TEXTURE, UV);
	vec2 size = vec2(textureSize(TEXTURE, 0));

	if(BLUR_active) blur(UV, TEXTURE, size, TEXTURE_PIXEL_SIZE, color);


	COLOR=color;
}	
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_c0u1k"]
shader = SubResource("Shader_gx78k")
shader_parameter/BLUR_active = true
shader_parameter/BLUR_radius = 11.267

[node name="Demo" type="Node2D"]

[node name="Sprite2D2" type="Sprite2D" parent="."]
material = SubResource("ShaderMaterial_c0u1k")
texture = ExtResource("3_t3lb8")
